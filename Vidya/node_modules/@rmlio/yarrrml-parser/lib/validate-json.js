const Ajv = require('ajv');
const schema = require('@rmlio/yarrrml-json-schema')

/**
 * This method validates an expanded JSON representation of a YARRRML document.
 * @param data - The JSON representation.
 * @returns {Promise<Array<ajv.ErrorObject>>} - Null if no errors are found, else an array of errors.
 */
module.exports = async (data) => {
  const ajv = new Ajv();
  const validate = ajv.compile(schema);
  const valid = validate(data);

  if (!valid) {
    return validate.errors;
  } else {
    return null;
  }
};
